<!DOCTYPE html>
<html >
  <head>
    <meta charset="UTF-8">
    <title>GlobalLogic Self Appraisal form</title>
    <script src="http://s.codepen.io/assets/libs/modernizr.js" type="text/javascript"></script>
    <link rel='stylesheet prefetch' href='http://maxcdn.bootstrapcdn.com/bootstrap/3.2.0/css/bootstrap.min.css'>
	<link rel='stylesheet prefetch' href='http://maxcdn.bootstrapcdn.com/bootstrap/3.2.0/css/bootstrap-theme.min.css'>
	<link rel='stylesheet prefetch' href='http://cdnjs.cloudflare.com/ajax/libs/jquery.bootstrapvalidator/0.5.0/css/bootstrapValidator.min.css'>
	<link rel="stylesheet" href="/css/appraisal_style.css">
    <link rel="stylesheet" href="/css/rangeSlider.css">
  <style>
  legend {
   border-bottom: 1px solid #ccc !important;
   }
   .form-group {
   text-align:left !important;
   }
   
   output {
            display: block;
            font-size: 30px;
            font-weight: bold;
            text-align: center;
            /* margin: 30px 0; */
            width: 100%;
			margin:-39px 0 0 193px;
        }
		
		*,
        *:before,
        *:after {
            -webkit-box-sizing: border-box;
            -moz-box-sizing: border-box;
            box-sizing: border-box;
        }
        .error{
            color: red;
            margin-bottom: 10px;
        }
        hr{border-top: 1px solid #521717 !important;}
  </style>  
    
    
  </head>

  <body>

    <div class="container">

<form class="well form-horizontal" action="<?php echo '/'.$action; ?>" method="post"  id="contact_form">
<fieldset>
<?php
$disable_db = false;
$disableTag = false;
$direct_reporting_to_mngr = ($emp_details->role == '2')?true:false;
if($role > 0){
    $disableTag = true;
}

                        echo $this->flashMessenger()
                                ->setMessageOpenFormat('<div%s><p>')
                                ->setMessageSeparatorString('</p><p>')
                                ->setMessageCloseString('</p></div>')
                                ->render('success', array('alert', 'alert-success'));
                       ?>
<!-- Form Name -->
<legend>GlobalLogic Self Appraisal form for the period 2015-16 <?php echo ($role != 0)?' - Review':''?><span style="float: right;"><?php
    if($login_user_role == 0){
    ?>
        <a href="/logout">Logout</a>
    <?php } ?>
        <?php
if($login_user_role > 0){
?>
    <a class="" href="/dashboard">Back </a>
<?php } ?>
    </span></legend>
<?php if($emp_details->complete == 3 && $role == 1 && $direct_reporting_to_mngr != true) {?>
<p style="color: red;">Reporting manager not yet reviewed this form.</p>	
<?php } ?>
<p>We recommend that the Self-Appraisal be completed and submitted to your manager as per timelines.</p>				
<!-- Text input-->

<div class="form-group">
  <label class="col-md-4 control-label">Name</label>  
  <div class="col-md-4 inputGroupContainer">
  <div class="input-group">
  <span class="input-group-addon"><i class="glyphicon glyphicon-user"></i></span>
  <input  name="name" placeholder="Name" class="form-control"  type="text" value="<?php echo isset($emp_details->name)?$emp_details->name:''; ?>" <?php echo isset($emp_details->name)?'disabled':''; ?>/>
    </div>
  </div>
</div>

<!-- Text input-->

<div class="form-group">
  <label class="col-md-4 control-label">Email</label>  
  <div class="col-md-4 inputGroupContainer">
  <div class="input-group">
  <span class="input-group-addon"><i class="glyphicon glyphicon-envelope"></i></span>
  <input  name="email" placeholder="Your Email ID" class="form-control"  type="email" value="<?php echo isset($emp_details->email)?$emp_details->email:''; ?>" <?php echo isset($emp_details->email)?'disabled':''; ?>/>
    </div>
  </div>
</div>
<!-- Text input-->

<div class="form-group">
  <label class="col-md-4 control-label" >GlobalLogic EID</label> 
    <div class="col-md-4 inputGroupContainer">
    <div class="input-group">
  <span class="input-group-addon"><i class="glyphicon glyphicon-user"></i></span>
  <input name="globallogic_eid" placeholder="GlobalLogic EID" class="form-control"  type="text" value="<?php echo isset($emp_details->eid)?$emp_details->eid:''; ?>" <?php echo isset($emp_details->eid)?'disabled':''; ?>/>
    </div>
  </div>
</div>

<!-- Text input-->

<div class="form-group">
  <label class="col-md-4 control-label" >Designation</label> 
    <div class="col-md-4 inputGroupContainer">
    <div class="input-group">
  <span class="input-group-addon"><i class="glyphicon glyphicon-user"></i></span>
  <input name="designation" placeholder="Designation" class="form-control"  type="text" value="<?php echo isset($emp_details->designation)?$emp_details->designation:''; ?>" <?php echo isset($emp_details->designation)?'disabled':''; ?>/>
    </div>
  </div>
</div>

<!-- Text input-->

<div class="form-group">
  <label class="col-md-4 control-label" >Process</label> 
    <div class="col-md-4 inputGroupContainer">
    <div class="input-group">
  <span class="input-group-addon"><i class="glyphicon glyphicon-user"></i></span>
  <input name="process" placeholder="Process" class="form-control"  type="text" value="<?php echo isset($emp_details->process)?$emp_details->process:''; ?>" <?php echo isset($emp_details->process)?'disabled':''; ?>/>
    </div>
  </div>
</div>

<!-- Text input-->

<div class="form-group">
  <label class="col-md-4 control-label" >DOJ</label> 
    <div class="col-md-4 inputGroupContainer">
    <div class="input-group">
  <span class="input-group-addon"><i class="glyphicon glyphicon-user"></i></span>
  <input name="doj" placeholder="DOJ" class="form-control"  type="text" value="<?php echo isset($emp_details->doj)?date('d-m-Y', strtotime($emp_details->doj)):''; ?>" <?php echo isset($emp_details->doj)?'disabled':''; ?>/>
    </div>
  </div>
</div>

<!-- Text input-->

<div class="form-group">
  <label class="col-md-4 control-label" >Reporting Manager email</label> 
    <div class="col-md-4 inputGroupContainer">
    <div class="input-group">
  <span class="input-group-addon"><i class="glyphicon glyphicon-envelope"></i></span>
  <input name="reporting_manager_email" placeholder="SuperVisor / Manager Email" class="form-control"  type="email" value="<?php echo isset($emp_details->mgr1_email)?$emp_details->mgr1_email:''; ?>" <?php echo isset($emp_details->mgr1_email)?'disabled':''; ?>/>
    </div>
  </div>
</div>
<!-- Text input-->

<div class="form-group">
  <label class="col-md-4 control-label" >Manager email</label> 
    <div class="col-md-4 inputGroupContainer">
    <div class="input-group">
  <span class="input-group-addon"><i class="glyphicon glyphicon-envelope"></i></span>
  <input name="manager_email" placeholder="SuperVisor / Manager Email" class="form-control"  type="email" value="<?php echo isset($emp_details->mgr2_email)?$emp_details->mgr2_email:''; ?>" <?php echo isset($emp_details->mgr2_email)?'disabled':''; ?>/>
    </div>
  </div>
</div>

<!-- Text input-->

<div class="form-group">
  <label class="col-md-4 control-label" >Major Responsibilities / KRA's</label> 
    <div class="col-md-4 inputGroupContainer">
    <div class="input-group">
  <span class="input-group-addon"><i class="glyphicon glyphicon-pencil"></i></span>
  <textarea name="major_responsibilities" id="major_responsibilities" placeholder="Major Responsibilities / KRA's" class="form-control"  cols='20' rows='5' <?php echo $disableTag?'disabled':''; ?>><?php echo isset($feedBack->major_resoponsbilties)?$feedBack->major_resoponsbilties:''; ?></textarea>
    </div>
  </div>
</div>


<!-- Text input

<div class="form-group">
  <label class="col-md-4 control-label" >Manager Comments</label> 
    <div class="col-md-4 inputGroupContainer">
    <div class="input-group">
  <span class="input-group-addon"><i class="glyphicon glyphicon-pencil"></i></span>
  <textarea name="manager_comments" placeholder="Manager Comments" class="form-control"  cols='20' rows='5'></textarea>
    </div>
  </div>
</div>
-->
<hr>
<input type="hidden" name="period" value="2015-16" />
<!-- dns changes start-->
<?php
foreach($appraisals as $ky => $val){
?>
<!-- Text input-->

<div class="form-group">
    <legend><?php echo is_array($val)?$val['type']:$val->type;?></legend>
  <label class="col-md-4 control-label" >Self Rating(Rate yourself)</label> 
    <div class="col-md-4 inputGroupContainer" style="margin-top:7px;">
    <div>
        <input name="self_rating_label_<?php echo is_array($val)?$val['id']:$val->id; ?>" type="hidden" value="<?php echo is_array($val)?$val['id']:$val->id; ?>">
        <input name="self_rating_<?php echo is_array($val)?$val['id']:$val->id; ?>" type="range" min="0" max="5" data-rangeSlider value="<?php echo is_array($val)?$val['aprsl_rate_id']:'';?>" <?php echo $disableTag?'disabled':'';?>/>
	<output name="self_rate_result_<?php echo is_array($val)?$val['id']:$val->id; ?>"></output>
    </div>
  </div>
</div>

<!-- Text input-->

<div class="form-group">
  <label class="col-md-4 control-label" >Key Pointers</label> 
    <div class="col-md-4 inputGroupContainer">
    <div class="input-group">
  <span class="input-group-addon"><i class="glyphicon glyphicon-pencil"></i></span>
  <textarea name="key_pointers_<?php echo is_array($val)?$val['id']:$val->id; ?>" placeholder="Key Pointers" class="form-control"  cols='20' rows='5' <?php echo $disableTag?'disabled':'';?>><?php echo is_array($val)?$val['key_pointers']:'';?></textarea>
    </div>
  </div>
</div>
 <?php
 //for reporting manager
    if($role > 0 && !$direct_reporting_to_mngr){
    ?>
    <!-- Text input-->

    <div class="form-group">
       <legend>Reporting Manager Review</legend>
      <label class="col-md-4 control-label" >Manager's Rating</label> 
        <div class="col-md-4 inputGroupContainer" style="margin-top:7px;">
            <div>
                <input name="reporting_managers_rating_<?php echo is_array($val) ? $val['id'] : $val->id; ?>" type="range" min="0" max="5" data-rangeSlider value="<?php echo (is_array($val) && isset($val['reporting_rating']))?$val['reporting_rating']:0; ?>" <?php echo ($role==1)?'disabled':'';?>/>    
                <output name="managers_rate_result_<?php echo is_array($val) ? $val['id'] : $val->id; ?>"></output>
            </div>
      </div>
    </div>

    <!-- Text input-->

    <div class="form-group">
      <label class="col-md-4 control-label" >Comments</label> 
        <div class="col-md-4 inputGroupContainer">
        <div class="input-group">
      <span class="input-group-addon"><i class="glyphicon glyphicon-pencil"></i></span>
      <textarea name="reporting_managers_comments_<?php echo is_array($val)?$val['id']:$val->id; ?>" placeholder="Comments" class="form-control"  cols='20' rows='5' <?php echo ($role==1)?'disabled':'';?>><?php echo is_array($val)?$val['reporting_comment']:'';?> </textarea>
        </div>
      </div>
    </div>
    <?php } ?>
    <?php
    //for manager
    if($role == 1){
    ?>
    <!-- Text input-->

    <div class="form-group">
       <legend>Manager Review</legend>
      <label class="col-md-4 control-label" >Manager's Rating</label> 
        <div class="col-md-4 inputGroupContainer" style="margin-top:7px;">
            <div>
	    <input name="managers_rating_<?php echo is_array($val)?$val['id']:$val->id; ?>" type="range" min="0" max="5" data-rangeSlider value="<?php echo (is_array($val) && isset($val['manager_ratting']))?$val['manager_ratting']:0;?>" />    
        <output name="managers_rate_result_<?php echo is_array($val)?$val['id']:$val->id; ?>"></output>
        </div>
      </div>
    </div>

    <!-- Text input-->

    <div class="form-group">
      <label class="col-md-4 control-label" >Comments</label> 
        <div class="col-md-4 inputGroupContainer">
        <div class="input-group">
      <span class="input-group-addon"><i class="glyphicon glyphicon-pencil"></i></span>
      <textarea name="comments_<?php echo is_array($val)?$val['id']:$val->id; ?>" placeholder="Comments" class="form-control"  cols='20' rows='5'><?php echo is_array($val)?$val['comment']:'';?> </textarea>
        </div>
      </div>
    </div>
    <?php } ?>
<hr>
<?php
}//end of foreach
?>
<!-- dns changes end-->

<!-- Text input-->

<div class="form-group">
  <label class="col-md-4 control-label" >Extra-mile(optional):Accepted targeted result beyond common call of duty and acts toward achieving given result</label> 
    <div class="col-md-4 inputGroupContainer">
    <div class="input-group">
  <span class="input-group-addon"><i class="glyphicon glyphicon-pencil"></i></span>
  <textarea name="extra_mile" placeholder="Extra-mile(optional)" class="form-control"  cols='20' rows='5' <?php echo $disableTag?'disabled':''; ?>><?php echo isset($feedBack->extra_mile)?$feedBack->extra_mile:''; ?></textarea>
    </div>
  </div>
</div>
<?php
if($role > 0 && !$direct_reporting_to_mngr){
?>
<!-- Text input-->

<div class="form-group">
  <label class="col-md-4 control-label" >Reporting Manager Comments</label> 
    <div class="col-md-4 inputGroupContainer">
    <div class="input-group">
  <span class="input-group-addon"><i class="glyphicon glyphicon-pencil"></i></span>
  <textarea name="e_rpt_manager_comment" placeholder="Manager/Lead Comments" class="form-control"  cols='20' rows='5' <?php echo ($role==1)?'disabled':'';?>><?php echo isset($feedBack->e_rpt_manager_comment)?$feedBack->e_rpt_manager_comment:''; ?></textarea>
    </div>
  </div>
</div>
<?php } ?>
<?php
if($role == 1){
?>
<!-- Text input-->

<div class="form-group">
  <label class="col-md-4 control-label" >Manager/Lead Comments</label> 
    <div class="col-md-4 inputGroupContainer">
    <div class="input-group">
  <span class="input-group-addon"><i class="glyphicon glyphicon-pencil"></i></span>
  <textarea name="extra_mile_comments" placeholder="Manager/Lead Comments" class="form-control"  cols='20' rows='5'><?php echo isset($feedBack->e_manager_comment)?$feedBack->e_manager_comment:''; ?></textarea>
    </div>
  </div>
</div>
<?php } ?>

<hr>
<div class="form-group">
  <label class="col-md-4 control-label" >Notable Accomplishments</label> 
    <div class="col-md-4 inputGroupContainer">
    <div class="input-group">
  <span class="input-group-addon"><i class="glyphicon glyphicon-pencil"></i></span>
  <textarea name="notable_accomplishments" placeholder="Notable Accomplishments" class="form-control"  cols='20' rows='5' <?php echo $disableTag?'disabled':''; ?>><?php echo isset($feedBack->notable_accomplishments)?$feedBack->notable_accomplishments:''; ?></textarea>
    </div>
  </div>
</div>
<?php
if($role > 0 && !$direct_reporting_to_mngr){
?>
<!-- Text input-->

<div class="form-group">
  <label class="col-md-4 control-label" >Reporting Manager Comments</label> 
    <div class="col-md-4 inputGroupContainer">
    <div class="input-group">
  <span class="input-group-addon"><i class="glyphicon glyphicon-pencil"></i></span>
  <textarea name="n_rpt_manager_comment" placeholder="Manager/Lead Comments" class="form-control"  cols='20' rows='5' <?php echo ($role==1)?'disabled':'';?>><?php echo isset($feedBack->n_rpt_manager_comment)?$feedBack->n_rpt_manager_comment:''; ?></textarea>
    </div>
  </div>
</div>
<?php } ?>
<?php
if($role == 1){
?>
<div class="form-group">
  <label class="col-md-4 control-label" >Manager/Lead Comments</label> 
    <div class="col-md-4 inputGroupContainer">
    <div class="input-group">
  <span class="input-group-addon"><i class="glyphicon glyphicon-pencil"></i></span>
  <textarea name="notable_accom_comments" placeholder="Manager/Lead Comments" class="form-control"  cols='20' rows='5'><?php echo isset($feedBack->n_manager_comment)?$feedBack->n_manager_comment:''; ?></textarea>
    </div>
  </div>
</div>

<hr>
<hr>
<div class="form-group">
  <label class="col-md-4 control-label" style="font-size:bold;font-size:19px">Overall Manager's Feedback with inline Self Rating</label> 
    <div class="col-md-4 inputGroupContainer">
    <div class="input-group">
  <span class="input-group-addon"><i class="glyphicon glyphicon-pencil"></i></span>
  <textarea name="overall_feedback" placeholder="Feedback" class="form-control"  cols='20' rows='5'><?php echo isset($feedBack->overall_fb)?$feedBack->overall_fb:''; ?></textarea>
    </div>
  </div>
</div>
<?php } ?>

<!-- Button -->
<div class="form-group">
  <label class="col-md-4 control-label"></label>
  <div class="col-md-4">
      <?php if($role == 0){ ?>
      <span>Note: You can edit/update this appraisal form till last date. After last date you are not allowed to update it. When you click on Submit, it is treated as final submit and an email will goes to your reporting authority.</span>
      <?php } ?>
      <input type="hidden" name="save_for_later" id="save_for_later" value="0"/>
      <button type="button" id="submit-btn" class="btn btn-primary" <?php echo $disable_db?'disabled':'';?>>Submit <span class="glyphicon glyphicon-send"></span></button>
      <?php if($role == 0){ ?>
      <button type="button" id="save_btn" class="btn btn-primary" <?php echo $disable_db?'disabled':'';?>>Save for later<span class="glyphicon glyphicon-send"></span></button>
      <?php } ?>
    <?php
if($role > 0){
?>
    <a class="btn btn-primary" href="/dashboard">Back </a>
<?php } ?>
  </div>
</div>

</fieldset>
</form>
</div>
    </div><!-- /.container -->
<script src='http://cdnjs.cloudflare.com/ajax/libs/jquery/2.1.3/jquery.min.js'></script>
<script src='http://maxcdn.bootstrapcdn.com/bootstrap/3.2.0/js/bootstrap.min.js'></script>
<script src='http://cdnjs.cloudflare.com/ajax/libs/bootstrap-validator/0.4.5/js/bootstrapvalidator.min.js'></script>
<script src="/js/index.js"></script>
<script src="/js/rangeSlider.js"></script>
<script src="/js/jquery.validate.js"></script>
<script>
    (function () {

        var selector = '[data-rangeSlider]',
            elements = document.querySelectorAll(selector);

        // Example functionality to demonstrate a value feedback
        function valueOutput(element) {
            var value = element.value,
                output = element.parentNode.getElementsByTagName('output')[0];
            output.innerHTML = value;
            }

        for (var i = elements.length - 1; i >= 0; i--) {
            valueOutput(elements[i]);
}
		
        Array.prototype.slice.call(document.querySelectorAll('input[type="range"]')).forEach(function (el) {
            el.addEventListener('input', function (e) {
                valueOutput(e.target);
            }, false);
});
		
        // Basic rangeSlider initialization
        rangeSlider.create(elements, {
            // Callback function
        });

    })();
</script>

    
    
    
  </body>
</html>

